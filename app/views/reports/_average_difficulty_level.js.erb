function difficulty_text(difficulty){
    difficulty = parseFloat(difficulty.toFixed(1))
    if(difficulty >= 3 && difficulty <= 3.5){
      return "HIGH"
    }
    else if(difficulty >= 2.5 && difficulty <= 2.9){
      return "MEDIUM HIGH"
    }
    else if(difficulty >= 1.5 && difficulty <= 2.4){
      return "MEDIUM"
    }
    else{
      return "LOW"
    }
}
var container = $("#average-difficulty-level-graph")[0];
Highcharts.chart(container, {
    chart: {
        type: 'column',
        backgroundColor: chart_background
    },
    title: {
        text: 'Average Difficulty Level'
    },
    subtitle: {
        text: ''
    },
    xAxis: {
        categories: [
            'I Set',
            'II Set',
            'III Set',
            'IV Set'
        ],
        crosshair: true,
        lineColor: '#000'
    },
    yAxis: {
        min: 0,
        step: 0.5,
        title: {
            text: 'Difficulty'
        },
        lineColor: '#000',
    },
    tooltip: {
        shared: true,
        formatter: function(){
            return "Level: " + difficulty_text(this.y)
        }
    },
    plotOptions: {
        column: {
            pointPadding: 0.2,
            borderWidth: 0,
            dataLabels: {
              enabled: true,
              color: '#000',
              formatter: function(){
                return this.y.toFixed(1)
              },
              style: {
                  fontSize: label_inner_size
              }
            }

        }
    },
    series: [{
        name: 'Average Difficulty',
        data: JSON.parse('<%= @average_difficulty_level.to_json.html_safe %>')

    }]
});
