<% if @subscription %>
  <%= bootstrap_row do %>
    <%= bootstrap_col(6) do %>
      <div class="plan-name"><%= current_user.free_subscription.plan.name %></div>
      <div class="plan-description">
        <% if current_user.free_subscription.plan.paper_count == 0 %>
          Upto <%= current_user.free_subscription.plan.paper_count %> for <%= current_user.free_subscription.plan.interval_count %> <%= current_user.free_subscription.plan.interval %>
        <% elsif current_user.free_subscription.plan.interval_count == 0 %>
          <%= current_user.free_subscription.plan.paper_count %> tests for unlimited period
        <% else %>
          Upto <%= current_user.free_subscription.plan.paper_count %> tests for <%= current_user.free_subscription.plan.interval_count %> <%= current_user.free_subscription.plan.interval %>
        <% end %>
      </div>
      <div class="plan-amount">
        <i class="glyphicon glyphicon-<%= current_user.free_subscription.plan.currency.downcase %>"></i> <%= current_user.free_subscription.plan.amount %>
      </div>
    <% end %>
    <%= bootstrap_col(6) do %>
      <div class="plan-name"><%= @subscription.plan.name %></div>
      <div class="plan-description">
        <% if @subscription.plan.paper_count == 0 %>
          Upto <%= @subscription.plan.paper_count %> for <%= @subscription.plan.interval_count %> <%= @subscription.plan.interval %>
        <% elsif @subscription.plan.interval_count == 0 %>
          <%= @subscription.plan.paper_count %> tests for unlimited period
        <% else %>
          Upto <%= @subscription.plan.paper_count %> tests for <%= @subscription.plan.interval_count %> <%= @subscription.plan.interval %>
        <% end %>
      </div>
      <div class="plan-amount">
        <i class="glyphicon glyphicon-<%= @subscription.plan.currency.downcase %>"></i> <%= @subscription.plan.amount %>
      </div>
      <div class="plan-status">
        <% if @subscription.is_active %>
          <i class="glyphicon glyphicon-ok"></i>
        <% end %>
      </div>
      <div>
        <% if (@subscription.in_progress_paper).present? %>
          <%= link_to "Start new test", new_test_url, class: "btn btn-primary" %>
        <% else %>
          <%= link_to "Resume test", new_test_url, class: "btn btn-primary" %>
        <% end %>
      </div>
    <% end %>
  <% end %>
<% else %>
  <%= bootstrap_row do %>
    <% (plans = Plan.all).each do |plan| %>
      <%= bootstrap_col((12 / plans.size)) do %>
        <div class="plan-name"><%= plan.name %></div>
        <div class="plan-description">
          <% if plan.paper_count == 0 %>
            Upto <%= plan.paper_count %> for <%= plan.interval_count %> <%= plan.interval %>
          <% elsif plan.interval_count == 0 %>
            <%= plan.paper_count %> tests for unlimited period
          <% else %>
            Upto <%= plan.paper_count %> tests for <%= plan.interval_count %> <%= plan.interval %>
          <% end %>
        </div>
        <div class="plan-amount">
          <i class="glyphicon glyphicon-<%= plan.currency.downcase %>"></i> <%= plan.amount %>
        </div>
        <div class="plan-purchase" id="plan-purchase-div-<%= plan.id %>">
          <a class="subscribe-btn btn <% if !plan.free_plan? %>btn-success<% else %>btn-default disabled<% end %>" href="<%= init_subscribe_to_plan_path(plan.id) %>" data-remote="true" data-method="post">Subscribe</a>
        </div>
      <% end %>
    <% end %>
  <% end %>
<% end %>
